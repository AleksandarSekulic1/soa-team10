<div class="blog-list-container">
  <div class="blog-header">
    <h1>Blog Feed</h1>
    <div class="blog-controls">
      <button (click)="createBlog()" class="create-btn">Create New Post</button>
      <div class="filter-toggle">
        <label class="toggle-label">
          <input 
            type="checkbox" 
            [checked]="showFollowedOnly" 
            (change)="toggleFilter()"
          />
          <span class="toggle-text">
            {{ showFollowedOnly ? 'Following Only' : 'All Posts' }}
          </span>
        </label>
      </div>
    </div>
  </div>
  
  <div *ngIf="blogs$ | async as blogs; else loading">
    <pre style="background:#eee; color:#222; padding:8px; font-size:12px; max-width:100vw; overflow:auto;">{{ blogs | json }}</pre>
    <div *ngIf="blogs.length === 0 && showFollowedOnly" class="empty-state">
      <h3>No posts from people you follow</h3>
      <p>Start following people to see their posts here!</p>
      <button (click)="toggleFilter()" class="show-all-btn">Show All Posts</button>
    </div>
    
    <div *ngIf="blogs.length === 0 && !showFollowedOnly" class="empty-state">
      <h3>No blog posts yet</h3>
      <p>Be the first to create a post!</p>
    </div>
    
    <div *ngFor="let blog of blogs" class="blog-card">
      <h2>{{ blog.Title || blog.title }}</h2>
      <p>by {{ blog.AuthorID || blog.authorId }} on {{ (blog.CreatedAt || blog.createdAt) | date: 'medium' }}</p>
      <p class="content-preview">{{ (blog.Content || blog.content) | slice:0:200 }}...</p>
      <div class="blog-stats">
        <span class="likes">‚ù§Ô∏è {{ (blog.Likes?.length ?? blog.likes?.length) || 0 }}</span>
        <span class="comments">üí¨ {{ (blog.Comments?.length ?? blog.comments?.length) || 0 }}</span>
      </div>
  <button (click)="viewBlog((blog.ID ?? blog._id ?? '').toString())" class="view-btn">View Details</button>
    </div>
  </div>

  <ng-template #loading>
    <p class="loading">Loading posts...</p>
  </ng-template>
</div>